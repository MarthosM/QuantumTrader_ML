# 🤖 Instruções para GitHub Copilot - ML Trading v2.0## 🎯 Diretrizes Essenciais

### 🚨 SEGURANÇA DE DADOS (PRIORITÁRIO)
1. **DADOS REAIS OBRIGATÓRIOS** em todos os testes finais e backtests
2. **MOCK APENAS para testes intermediários** de componentes isolados
3. **APAGAR dados mock imediatamente** após uso
4. **VALIDAÇÃO automática** bloqueia dados sintéticos em produção
5. **Sempre consultar `DEVELOPER_GUIDE.md`** para política de dados

### � IMPLEMENTAÇÃO TÉCNICA  
1. **Use o mapeamento completo** como referência arquitetural
2. **Features ~80-100**: OHLCV + Indicadores + Momentum + Volatilidade  
3. **DataFrames separados**: candles, microstructure, orderbook, indicators, features
4. **Threading**: Usar queues para cálculos pesados
5. **Validação**: Sempre valide dados em cada etapa

### 🧪 **PADRÕES DE TESTE ATUALIZADOS**
- pytest com diretórios temporários para isolamento
- **Dados reais prioritários**: Use `pytest.skip()` se não disponível
- **Mock APENAS para testes intermediários específicos**
- **Testes finais OBRIGATORIAMENTE com dados reais**
- **Backtests NUNCA com dados simulações**exto Rápido

Sistema de trading algorítmico com ML para análise de mercado financeiro - **SISTEMA REAL COM RISCOS FINANCEIROS**

## 🗂️ Documentação de Referência

### 📊 **OBRIGATÓRIO**: Consultar antes de qualquer implementação
- `src/features/complete_ml_data_flow_map.md` - **Mapeamento completo do fluxo de dados**  
- `DEVELOPER_GUIDE.md` - **Guia técnico detalhado e atualizações recentes**
- `README.md` - Estrutura geral do projeto
- `tests/test_etapa1.py` - Padrões de teste estabelecidos
- `ml_backtester.py` - Sistema de backtest ML funcional

## 🛡️ **POLÍTICA DE DADOS (FUNDAMENTAL)**

### ⚠️ **SISTEMA REAL - NUNCA USAR DADOS MOCK NAS FINAIS**

**Este sistema operativa com dinheiro real e pode gerar sérios prejuízos financeiros!**

#### ✅ **DADOS REAIS (PRIORIDADE MÁXIMA)**
- **Sempre prefere** dados da ProfitDLL quando conectada
- **Todos os testes finais** OBRIGATORIAMENTE com dados reais
- **Todos os backtests** APENAS com dados históricos reais
- **Produção**: Bloqueio automático de dados sintéticos

#### ⚠️ **DADOS MOCK (USO CRÍTICO RESTRITO)**
- **APENAS durante desenvolvimento** de componentes isolados
- **APAGAR IMEDIATAMENTE** após teste intermediário 
- **NUNCA me testes de integração final**
- **NUNCA em backtests ou sistemas importantes**
- **BLOQUEADOS automatically em produção**

```python
# ❌ NUNCA FAZER ISSO EM TESTES FINAIS:
def test_final_system():
    mock_data = create_fake_data()  # ❌ PROIBIDO
    
# ✅ SEMPRE FAZER ISSO:
def test_final_system():
    real_data = load_real_data()  # ✅ CORRETO
    if real_data.empty:
        pytest.skip("Dados reais indisponíveis")
```

## 🏗️ Arquitetura Principal

```
Fluxo: Modelos → Dados → Indicadores → Features → Predição → Sinal
       ↓         ↓       ↓           ↓        ↓          ↓
   ModelManager  DataStructure  FeatureGenerator  MLIntegration
```

## 🎯 Diretrizes Essenciais

1. **Use o mapeamento completo** como referência arquitetural
2. **Features ~80-100**: OHLCV + Indicadores + Momentum + Volatilidade
3. **DataFrames separados**: candles, microstructure, orderbook, indicators, features
4. **Threading**: Use queues para cálculos pesados
5. **Validação**: Sempre valide dados em cada etapa

## 🧪 Padrões de Teste

- pytest com diretórios temporários
- Teste DLL real quando disponível
- skipTest para dependências externas

## 📚 Stack Tecnológico

ML: scikit-learn, lightgbm, xgboost | Dados: pandas, numpy, ta | Tests: pytest

## 🔄 **ATUALIZAÇÕES RECENTES (2025-07-21)**

- ✅ **ml_backtester.py**: Sistema completo de backtest ML funcional
- ✅ **30 Features Principais**: EMA, ATR, ADX, Bollinger, volatilidades calculadas
- ✅ **Manual Feature Calculation**: Fallback robusto para features indisponíveis
- ✅ **Modelos Reais Integrados**: LightGBM + Random Forest + XGBoost treinados
- ✅ **Sistema Conservador**: Rejeição inteligente de sinals com baixa confiança
- ✅ **Política de Dados clara**: Mock controlado, dados reais prioritários

---
**Lembre-se**: Sistema REAL com riscos financeiros - Sempre priorize precisão sobre velocidade!
**Sempre consulte `DEVELOPER_GUIDE.md` e `src/features/complete_ml_data_flow_map.md` antes de implementações!**
