# ğŸ¤– InstruÃ§Ãµes para GitHub Copilot - ML Trading v2.0## ğŸ¯ Diretrizes Essenciais

### ğŸš¨ SEGURANÃ‡A DE DADOS (PRIORITÃRIO)
1. **DADOS REAIS OBRIGATÃ“RIOS** em todos os testes finais e backtests
2. **MOCK APENAS para testes intermediÃ¡rios** de componentes isolados
3. **APAGAR dados mock imediatamente** apÃ³s uso
4. **VALIDAÃ‡ÃƒO automÃ¡tica** bloqueia dados sintÃ©ticos em produÃ§Ã£o
5. **Sempre consultar `DEVELOPER_GUIDE.md`** para polÃ­tica de dados

### ï¿½ IMPLEMENTAÃ‡ÃƒO TÃ‰CNICA  
1. **Use o mapeamento completo** como referÃªncia arquitetural
2. **Features ~80-100**: OHLCV + Indicadores + Momentum + Volatilidade  
3. **DataFrames separados**: candles, microstructure, orderbook, indicators, features
4. **Threading**: Usar queues para cÃ¡lculos pesados
5. **ValidaÃ§Ã£o**: Sempre valide dados em cada etapa

### ğŸ§ª **PADRÃ•ES DE TESTE ATUALIZADOS**
- pytest com diretÃ³rios temporÃ¡rios para isolamento
- **Dados reais prioritÃ¡rios**: Use `pytest.skip()` se nÃ£o disponÃ­vel
- **Mock APENAS para testes intermediÃ¡rios especÃ­ficos**
- **Testes finais OBRIGATORIAMENTE com dados reais**
- **Backtests NUNCA com dados simulaÃ§Ãµes**exto RÃ¡pido

Sistema de trading algorÃ­tmico com ML para anÃ¡lise de mercado financeiro - **SISTEMA REAL COM RISCOS FINANCEIROS**

## ğŸ—‚ï¸ DocumentaÃ§Ã£o de ReferÃªncia

### ğŸ“Š **OBRIGATÃ“RIO**: Consultar antes de qualquer implementaÃ§Ã£o
- `src/features/complete_ml_data_flow_map.md` - **Mapeamento completo do fluxo de dados**  
- `DEVELOPER_GUIDE.md` - **Guia tÃ©cnico detalhado e atualizaÃ§Ãµes recentes**
- `README.md` - Estrutura geral do projeto
- `tests/test_etapa1.py` - PadrÃµes de teste estabelecidos
- `ml_backtester.py` - Sistema de backtest ML funcional

## ğŸ›¡ï¸ **POLÃTICA DE DADOS (FUNDAMENTAL)**

### âš ï¸ **SISTEMA REAL - NUNCA USAR DADOS MOCK NAS FINAIS**

**Este sistema operativa com dinheiro real e pode gerar sÃ©rios prejuÃ­zos financeiros!**

#### âœ… **DADOS REAIS (PRIORIDADE MÃXIMA)**
- **Sempre prefere** dados da ProfitDLL quando conectada
- **Todos os testes finais** OBRIGATORIAMENTE com dados reais
- **Todos os backtests** APENAS com dados histÃ³ricos reais
- **ProduÃ§Ã£o**: Bloqueio automÃ¡tico de dados sintÃ©ticos

#### âš ï¸ **DADOS MOCK (USO CRÃTICO RESTRITO)**
- **APENAS durante desenvolvimento** de componentes isolados
- **APAGAR IMEDIATAMENTE** apÃ³s teste intermediÃ¡rio 
- **NUNCA me testes de integraÃ§Ã£o final**
- **NUNCA em backtests ou sistemas importantes**
- **BLOQUEADOS automatically em produÃ§Ã£o**

```python
# âŒ NUNCA FAZER ISSO EM TESTES FINAIS:
def test_final_system():
    mock_data = create_fake_data()  # âŒ PROIBIDO
    
# âœ… SEMPRE FAZER ISSO:
def test_final_system():
    real_data = load_real_data()  # âœ… CORRETO
    if real_data.empty:
        pytest.skip("Dados reais indisponÃ­veis")
```

## ğŸ—ï¸ Arquitetura Principal

```
Fluxo: Modelos â†’ Dados â†’ Indicadores â†’ Features â†’ PrediÃ§Ã£o â†’ Sinal
       â†“         â†“       â†“           â†“        â†“          â†“
   ModelManager  DataStructure  FeatureGenerator  MLIntegration
```

## ğŸ¯ Diretrizes Essenciais

1. **Use o mapeamento completo** como referÃªncia arquitetural
2. **Features ~80-100**: OHLCV + Indicadores + Momentum + Volatilidade
3. **DataFrames separados**: candles, microstructure, orderbook, indicators, features
4. **Threading**: Use queues para cÃ¡lculos pesados
5. **ValidaÃ§Ã£o**: Sempre valide dados em cada etapa

## ğŸ§ª PadrÃµes de Teste

- pytest com diretÃ³rios temporÃ¡rios
- Teste DLL real quando disponÃ­vel
- skipTest para dependÃªncias externas

## ğŸ“š Stack TecnolÃ³gico

ML: scikit-learn, lightgbm, xgboost | Dados: pandas, numpy, ta | Tests: pytest

## ğŸ”„ **ATUALIZAÃ‡Ã•ES RECENTES (2025-07-21)**

- âœ… **ml_backtester.py**: Sistema completo de backtest ML funcional
- âœ… **30 Features Principais**: EMA, ATR, ADX, Bollinger, volatilidades calculadas
- âœ… **Manual Feature Calculation**: Fallback robusto para features indisponÃ­veis
- âœ… **Modelos Reais Integrados**: LightGBM + Random Forest + XGBoost treinados
- âœ… **Sistema Conservador**: RejeiÃ§Ã£o inteligente de sinals com baixa confianÃ§a
- âœ… **PolÃ­tica de Dados clara**: Mock controlado, dados reais prioritÃ¡rios

---
**Lembre-se**: Sistema REAL com riscos financeiros - Sempre priorize precisÃ£o sobre velocidade!
**Sempre consulte `DEVELOPER_GUIDE.md` e `src/features/complete_ml_data_flow_map.md` antes de implementaÃ§Ãµes!**
